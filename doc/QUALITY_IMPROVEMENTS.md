# –£–ª—É—á—à–µ–Ω–∏—è –∫–∞—á–µ—Å—Ç–≤–∞ –∫–æ–¥–∞ systtechbot

**–î–∞—Ç–∞:** 2025-10-11  
**–û—Å–Ω–æ–≤–∞–Ω–∏–µ:** Code review –æ—Ç Senior Python Tech Lead

---

## üìã –û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã

### 1. ‚úÖ –°–æ–∑–¥–∞–Ω `workflow_tech_debt.mdc`
**–ü—É—Ç—å:** `.cursor/rules/workflow_tech_debt.mdc`

–°–ø–µ—Ü–∏–∞–ª—å–Ω—ã–π workflow –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–º –¥–æ–ª–≥–æ–º:
- –§–æ–∫—É—Å –Ω–∞ –∫–∞—á–µ—Å—Ç–≤–µ –±–µ–∑ –ª–æ–º–∞—é—â–∏—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π
- –û–±—è–∑–∞—Ç–µ–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ `make quality` –Ω–∞ –∫–∞–∂–¥–æ–º —ç—Ç–∞–ø–µ
- –°–ø–µ—Ü–∏–∞–ª—å–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç –∫–æ–º–º–∏—Ç–æ–≤: `refactor(tech-debt-N): –æ–ø–∏—Å–∞–Ω–∏–µ`
- –ú–µ—Ç—Ä–∏–∫–∏ –∫–∞—á–µ—Å—Ç–≤–∞ –≤ –∫–∞–∂–¥–æ–π –∏—Ç–µ—Ä–∞—Ü–∏–∏

### 2. ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω `conventions.mdc`
**–ü—É—Ç—å:** `.cursor/rules/conventions.mdc`  
**–í–µ—Ä—Å–∏—è:** 2.0

**–î–æ–±–∞–≤–ª–µ–Ω—ã —Ä–∞–∑–¥–µ–ª—ã:**

#### –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–¥–∞
- –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç: `ruff`
- –î–ª–∏–Ω–∞ —Å—Ç—Ä–æ–∫–∏: 100 —Å–∏–º–≤–æ–ª–æ–≤
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ: `make format`

#### –õ–∏–Ω—Ç–∏–Ω–≥ –∏ –∞–Ω–∞–ª–∏–∑
- –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç: `ruff` (–∑–∞–º–µ–Ω–∞ black + flake8 + isort)
- –ü—Ä–∞–≤–∏–ª–∞: E, W, F, I, B, C4, UP
- –ö–æ–º–∞–Ω–¥–∞: `make lint`
- –¶–µ–ª—å: 0 –æ—à–∏–±–æ–∫

#### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–∏–ø–æ–≤
- –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç: `mypy`
- Strict mode –¥–ª—è –≤—Å–µ—Ö –ø—É–±–ª–∏—á–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π
- –°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π —Å–∏–Ω—Ç–∞–∫—Å–∏—Å Python 3.11+ (list[str], str | None)
- –ö–æ–º–∞–Ω–¥–∞: `make typecheck`
- –¶–µ–ª—å: 0 –æ—à–∏–±–æ–∫

#### –î–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
- Google Style –¥–ª—è docstrings
- –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã –¥–ª—è –≤—Å–µ—Ö –ø—É–±–ª–∏—á–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π –∏ –∫–ª–∞—Å—Å–æ–≤
- –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –≤ docstrings

#### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
- –¶–µ–ª–µ–≤–æ–π coverage: >= 80%
- Parametrized —Ç–µ—Å—Ç—ã
- –ú–æ–∫–∏—Ä–æ–≤–∞–Ω–∏–µ –≤–Ω–µ—à–Ω–∏—Ö –≤—ã–∑–æ–≤–æ–≤
- –§–∏–∫—Å—Ç—É—Ä—ã –¥–ª—è –ø–æ–≤—Ç–æ—Ä—è—é—â–∏—Ö—Å—è –¥–∞–Ω–Ω—ã—Ö

#### –õ—É—á—à–∏–µ –ø—Ä–∞–∫—Ç–∏–∫–∏ Python
- –°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π —Å–∏–Ω—Ç–∞–∫—Å–∏—Å (Python 3.11+)
- Dataclasses –¥–ª—è —Å—Ç—Ä—É–∫—Ç—É—Ä
- Context managers
- Enum –≤–º–µ—Å—Ç–æ magic strings
- –ù–µ—Ç –∏–∑–º–µ–Ω—è–µ–º—ã—Ö default arguments
- –ü—Ä–∞–≤–∏–ª—å–Ω–∞—è —Ä–∞–±–æ—Ç–∞ —Å async/await

#### –ö–æ–Ω—Å—Ç–∞–Ω—Ç—ã –∏ Enums
- MessageRole enum –≤–º–µ—Å—Ç–æ —Å—Ç—Ä–æ–∫
- –ö–æ–Ω—Å—Ç–∞–Ω—Ç—ã –¥–ª—è –≤—Å–µ—Ö magic numbers
- –ù–µ—Ç magic strings –≤ –∫–æ–¥–µ

#### –ü–æ–ª–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –∫–∞—á–µ—Å—Ç–≤–∞
- –ö–æ–º–∞–Ω–¥–∞: `make quality`
- –ó–∞–ø—É—Å–∫–∞–µ—Ç: format ‚Üí lint ‚Üí typecheck ‚Üí test
- –û–±—è–∑–∞—Ç–µ–ª—å–Ω–∞ –ø–µ—Ä–µ–¥ –∫–æ–º–º–∏—Ç–æ–º

### 3. ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω `vision.md`
**–ü—É—Ç—å:** `doc/vision.md`  
**–í–µ—Ä—Å–∏—è:** 1.1 (MVP + Quality)

**–ò–∑–º–µ–Ω–µ–Ω–∏—è:**

#### –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
–î–æ–±–∞–≤–ª–µ–Ω—ã –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –∫–∞—á–µ—Å—Ç–≤–∞:
```toml
[project.optional-dependencies]
dev = [
    "pytest>=7.0.0",
    "pytest-asyncio>=0.21.0",
    "pytest-cov>=4.1.0",      # Coverage reporting
    "ruff>=0.1.0",             # Formatter + linter
    "mypy>=1.7.0",             # Type checker
]
```

#### –ù–æ–≤—ã–π —Ä–∞–∑–¥–µ–ª: –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –∫–∞—á–µ—Å—Ç–≤–∞ –∫–æ–¥–∞
- ruff ‚Äî —Ñ–æ—Ä–º–∞—Ç—Ç–µ—Ä –∏ –ª–∏–Ω—Ç–µ—Ä
- mypy ‚Äî —Ç–∏–ø–∏–∑–∞—Ü–∏—è
- pytest-cov ‚Äî coverage
- –¶–µ–ª–µ–≤–æ–π coverage: >= 80%

#### –û–±–Ω–æ–≤–ª–µ–Ω —Ä–∞–∑–¥–µ–ª: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
- –£—Ä–æ–≤–µ–Ω—å: –¥–æ—Å—Ç–∞—Ç–æ—á–Ω—ã–π (–±—ã–ª–æ: –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–π)
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã
- –ú–æ–∫–∏—Ä–æ–≤–∞–Ω–∏–µ
- Parametrized —Ç–µ—Å—Ç—ã

#### –ù–æ–≤—ã–π —Ä–∞–∑–¥–µ–ª: –ö–∞—á–µ—Å—Ç–≤–æ –∫–æ–¥–∞
- –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ: `ruff format`
- –õ–∏–Ω—Ç–∏–Ω–≥: `ruff check`
- –¢–∏–ø–∏–∑–∞—Ü–∏—è: `mypy`
- –ö–æ–º–∞–Ω–¥–∞: `make quality`

#### –û–±–Ω–æ–≤–ª–µ–Ω Makefile
–ù–æ–≤—ã–µ –∫–æ–º–∞–Ω–¥—ã:
- `make format` ‚Äî —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
- `make lint` ‚Äî –ª–∏–Ω—Ç–∏–Ω–≥
- `make typecheck` ‚Äî –ø—Ä–æ–≤–µ—Ä–∫–∞ —Ç–∏–ø–æ–≤
- `make coverage` ‚Äî —Ç–µ—Å—Ç—ã —Å –ø–æ–∫—Ä—ã—Ç–∏–µ–º
- `make quality` ‚Äî –ø–æ–ª–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞

#### –ö—Ä–∏—Ç–µ—Ä–∏–∏ —É—Å–ø–µ—Ö–∞ MVP
–î–æ–±–∞–≤–ª–µ–Ω—ã:
- ‚úÖ –ö–∞—á–µ—Å—Ç–≤–æ –∫–æ–¥–∞: `make quality` –ø—Ä–æ—Ö–æ–¥–∏—Ç –±–µ–∑ –æ—à–∏–±–æ–∫
- ‚úÖ –ü–æ–∫—Ä—ã—Ç–∏–µ —Ç–µ—Å—Ç–∞–º–∏ >= 80%

### 4. ‚úÖ –°–æ–∑–¥–∞–Ω `tasklist_tech_debt.md`
**–ü—É—Ç—å:** `doc/tasklist_tech_debt.md`

–ü–ª–∞–Ω —Ä–∞–±–æ—Ç—ã –ø–æ —É–ª—É—á—à–µ–Ω–∏—é –∫–∞—á–µ—Å—Ç–≤–∞ –Ω–∞ 5 –∏—Ç–µ—Ä–∞—Ü–∏–π:

| –ò—Ç–µ—Ä–∞—Ü–∏—è | –ó–∞–¥–∞—á–∏ | –¶–µ–ª—å |
|----------|--------|------|
| 0 | –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –∫–∞—á–µ—Å—Ç–≤–∞ | –ù–∞—Å—Ç—Ä–æ–∏—Ç—å ruff, mypy, pytest-cov |
| 1 | –ö—Ä–∏—Ç–∏—á–Ω—ã–π —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ | –£–±—Ä–∞—Ç—å –≥–ª–æ–±–∞–ª—å–Ω—ã–µ side effects, singleton OpenAI |
| 2 | –°—Ç—Ä–æ–≥–∞—è —Ç–∏–ø–∏–∑–∞—Ü–∏—è | Type hints –≤–µ–∑–¥–µ, TypedDict, mypy 0 errors |
| 3 | –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤ | Coverage 80%+, –º–æ–∫–∏, parametrized |
| 4 | –§–∏–Ω–∞–ª—å–Ω–∞—è –ø–æ–ª–∏—Ä–æ–≤–∫–∞ | Docstrings, README, —Ñ–∏–Ω–∞–ª—å–Ω—ã–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ |

---

## üéØ –ù–æ–≤—ã–µ –∫–æ–º–∞–Ω–¥—ã

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–∞—á–µ—Å—Ç–≤–∞
```bash
make format      # –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–¥–∞ (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏)
make lint        # –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–∏–Ω—Ç–µ—Ä–æ–º (0 –æ—à–∏–±–æ–∫)
make typecheck   # –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–∏–ø–æ–≤ (0 –æ—à–∏–±–æ–∫ mypy)
make coverage    # –¢–µ—Å—Ç—ã —Å –æ—Ç—á–µ—Ç–æ–º –æ –ø–æ–∫—Ä—ã—Ç–∏–∏
make quality     # –ü–æ–ª–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ (–≤—Å–µ –≤—ã—à–µ)
```

### –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞
```bash
make install     # –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π (–≤–∫–ª—é—á–∞—è dev)
make run         # –ó–∞–ø—É—Å–∫ –±–æ—Ç–∞
make test        # –ë—ã—Å—Ç—Ä—ã–µ —Ç–µ—Å—Ç—ã
make clean       # –û—á–∏—Å—Ç–∫–∞ –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤
```

---

## üìä –ú–µ—Ç—Ä–∏–∫–∏ –∫–∞—á–µ—Å—Ç–≤–∞

| –ú–µ—Ç—Ä–∏–∫–∞ | –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç | –¶–µ–ª–µ–≤–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ |
|---------|------------|------------------|
| –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ | ruff format | 100% (–∞–≤—Ç–æ) |
| –°—Ç–∏–ª—å –∫–æ–¥–∞ | ruff check | 0 –æ—à–∏–±–æ–∫ |
| –¢–∏–ø–∏–∑–∞—Ü–∏—è | mypy | 0 –æ—à–∏–±–æ–∫ |
| –¢–µ—Å—Ç—ã | pytest | 100% passed |
| –ü–æ–∫—Ä—ã—Ç–∏–µ | pytest-cov | >= 80% |

---

## üöÄ –ö–∞–∫ –Ω–∞—á–∞—Ç—å —Ä–∞–±–æ—Ç—É

### 1. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤
```bash
cd systtechbot
uv sync  # –£—Å—Ç–∞–Ω–æ–≤–∏—Ç –≤—Å–µ dev –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
```

### 2. –ü–µ—Ä–≤–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞
```bash
make quality
```

**–û–∂–∏–¥–∞–µ–º–æ:** –ú–æ–∂–µ—Ç –ø–æ–∫–∞–∑–∞—Ç—å –æ—à–∏–±–∫–∏ ‚Äî —ç—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ, –º—ã –∏—Ö –∏—Å–ø—Ä–∞–≤–∏–º –≤ –∏—Ç–µ—Ä–∞—Ü–∏—è—Ö.

### 3. –ù–∞—á–∞—Ç—å —Ä–∞–±–æ—Ç—É –ø–æ –ø–ª–∞–Ω—É
–°–º. `doc/tasklist_tech_debt.md` ‚Äî –ò—Ç–µ—Ä–∞—Ü–∏—è 0

---

## üìö –°–≤—è–∑–∞–Ω–Ω—ã–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã

- [tasklist_tech_debt.md](tasklist_tech_debt.md) ‚Äî –î–µ—Ç–∞–ª—å–Ω—ã–π –ø–ª–∞–Ω —Ä–∞–±–æ—Ç
- [workflow_tech_debt.mdc](../.cursor/rules/workflow_tech_debt.mdc) ‚Äî –ü—Ä–æ—Ü–µ—Å—Å —Ä–∞–±–æ—Ç—ã
- [conventions.mdc](../.cursor/rules/conventions.mdc) ‚Äî –°–æ–≥–ª–∞—à–µ–Ω–∏—è (–æ–±–Ω–æ–≤–ª–µ–Ω–æ)
- [vision.md](vision.md) ‚Äî –¢–µ—Ö–Ω–∏—á–µ—Å–∫–æ–µ –≤–∏–¥–µ–Ω–∏–µ (–æ–±–Ω–æ–≤–ª–µ–Ω–æ)

---

## ‚úÖ Checklist –¥–æ –Ω–∞—á–∞–ª–∞ —Ä–∞–±–æ—Ç—ã

- [ ] –ü—Ä–æ—á–∏—Ç–∞–ª –æ–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–π `conventions.mdc`
- [ ] –ü—Ä–æ—á–∏—Ç–∞–ª `workflow_tech_debt.mdc`
- [ ] –ü—Ä–æ—á–∏—Ç–∞–ª `tasklist_tech_debt.md`
- [ ] –£—Å—Ç–∞–Ω–æ–≤–∏–ª –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏: `uv sync`
- [ ] –ü—Ä–æ–≤–µ—Ä–∏–ª —Ç–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ: `make quality`
- [ ] –ì–æ—Ç–æ–≤ –Ω–∞—á–∞—Ç—å –ò—Ç–µ—Ä–∞—Ü–∏—é 0

---

**–°–ª–µ–¥—É—é—â–∏–π —à–∞–≥:** –ù–∞—á–∞—Ç—å —Ä–∞–±–æ—Ç—É —Å –ò—Ç–µ—Ä–∞—Ü–∏–∏ 0 –∏–∑ `tasklist_tech_debt.md`

